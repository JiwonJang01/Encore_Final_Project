{% include 'header.html' %}
<section id="write_diary" class="diary detail_diary" xmlns="http://www.w3.org/1999/html">
    <h2 class="screen_out">다이어리 작성</h2>
    <div class="write-container">
        <form id="diary-form" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <p>
                <label for="id_diarytitle">일기 제목:</label>
                {{ form.diarytitle }}
            </p>
            <p>
                <label for="id_place">장소:</label>
                {{ form.place }}
            </p>
            <p>
                <label for="id_withfriend">친구와 함께:</label>
                {{ form.withfriend }}
            </p>
            <p>
                <label for="id_content">내용:</label>
                {{ form.content }}
            </p>
            <p>
                <label for="id_repreimg">대표이미지:</label>
                {{ form.image_file }}
            </p>

            <button type="button" id="ai-button" class="btn-diary-action">AI로 작성하기</button>
            <div id="emotion-field" style="display: none;">
                <label for="id_emotion">감정:</label>
                {{ form.emotion }}
            </div>

            {{ image_form.as_p }}

            <button type="submit" class="btn-diary-action">일기 작성</button>
        </form>
        <!-- 일기 리스트 링크 -->
        <button id="list-button" class="btn-diary-action">
            <a href="{% url 'list_diary' %}">리스트</a>
        </button>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 버튼과 폼 요소를 가져옵니다.
            var aiButton = document.getElementById('ai-button');
            var emotionField = document.getElementById('emotion-field');

            // 버튼 클릭 이벤트 리스너 추가
            aiButton.addEventListener('click', function() {
                // 폼의 현재 display 속성을 확인하고, 이를 기반으로 토글합니다.
                if (emotionField.style.display === 'none') {
                    emotionField.style.display = 'block'; // 폼을 보이게 함
                } else {
                    emotionField.style.display = 'none'; // 폼을 숨김
                }
            });
        });
    </script>

</section>
{% include 'footer.html' %}